import { createContext, useContext, useState, useEffect, ReactNode } from 'react';

type Language = 'english' | 'french' | 'hausa' | 'yoruba' | 'igbo' | 'swahili' | 'wolof' | 'bambara' | 'fula' | 'twi';

interface LanguageContextType {
  language: Language;
  setLanguage: (language: Language) => void;
  t: (key: string) => string;
}

const LanguageContext = createContext<LanguageContextType | undefined>(undefined);

// Translation object
const translations: Record<Language, Record<string, string>> = {
  english: {
    // Navigation
    'nav.home': 'Home',
    'nav.camera': 'Camera',
    'nav.history': 'History',
    'nav.tips': 'Tips',
    'nav.settings': 'Settings',
    
    // Settings Page
    'settings.title': 'Settings',
    'settings.profile': 'Profile',
    'settings.editProfile': 'Edit Profile',
    'settings.completeProfile': 'Complete your profile',
    'settings.addLocation': 'Add location',
    'settings.setupProfile': 'Set up your farming profile',
    'settings.appSettings': 'App Settings',
    'settings.language': 'Language',
    'settings.audioLanguage': 'Audio Language',
    'settings.darkMode': 'Dark Mode',
    'settings.darkModeDesc': 'Switch to dark theme',
    'settings.offlineMode': 'Offline Mode',
    'settings.offlineModeDesc': 'Cache content for offline use',
    'settings.offlineFeatures': 'Offline Features',
    'settings.downloadCache': 'Download Offline Cache',
    'settings.downloadCacheDesc': 'Download common crops for your region',
    'settings.downloading': 'Downloading...',
    'settings.download': 'Download',
    'settings.subscription': 'Subscription',
    'settings.upgradeTopremium': 'Upgrade to Premium',
    'settings.premiumDesc': 'Unlimited scans, advanced features',
    'settings.support': 'Support',
    'settings.helpSupport': 'Help & Support',
    'settings.helpSupportDesc': 'FAQs, contact support',
    'settings.privacyPolicy': 'Privacy Policy',
    'settings.privacyPolicyDesc': 'How we protect your data',
    'settings.usage': 'This Month\'s Usage',
    'settings.scansUsed': 'Scans Used',
    'settings.freeRemaining': 'Free Remaining',
    'settings.upgradeUnlimited': 'Upgrade for Unlimited Scans',
    'settings.farmer': 'farmer',
    'settings.managing': 'Managing',
    'settings.hectares': 'hectares',
    'settings.version': 'Version 1.0.0',
    'settings.madeWith': 'Made with üíö for farmers worldwide',
    'settings.serving': 'Serving farmers in',
    
    // Pricing
    'pricing.title': 'Choose Your Plan',
    'pricing.backToSettings': '‚Üê Back to Settings',
    'pricing.freePlan': 'üÜì Free Plan',
    'pricing.premiumPlan': 'üí≥ Premium Plan',
    'pricing.access': 'Access:',
    'pricing.benefits': 'Benefits:',
    'pricing.currentPlan': 'Current Plan',
    'pricing.upgradeNow': 'Upgrade Now',
    'pricing.paymentMethods': 'Payment Methods (Region-Friendly)',
    'pricing.airtime': 'Airtime Billing',
    'pricing.airtimeDesc': 'via Flutterwave/Maviance',
    'pricing.offlineCodes': 'Offline Codes',
    'pricing.offlineCodesDesc': 'NGO/Cooperative vouchers',
    
    // Free Plan Features
    'pricing.free.scans': '‚úÖ 3 AI scans per day',
    'pricing.free.diagnosis': '‚úÖ View diagnosis + solutions',
    'pricing.free.voice': '‚úÖ Voice explanation (1 language)',
    'pricing.free.history': '‚úÖ View last 5 scan history entries',
    'pricing.free.noOffline': 'üö´ No offline queueing',
    'pricing.free.noGuides': 'üö´ No access to advanced guides',
    'pricing.free.limitedCrops': 'üö´ Limited crop support',
    
    // Premium Plan Features
    'pricing.premium.unlimited': 'üîì Unlimited scans',
    'pricing.premium.offline': 'üì∂ Full offline diagnosis + history access',
    'pricing.premium.voice': 'üó£ Voice/audio explanations in multiple local languages',
    'pricing.premium.crops': 'üåæ Diagnosis + remedy guides for more crops',
    'pricing.premium.tips': 'üß† Daily expert tips based on region & season',
    'pricing.premium.support': 'üì§ Priority support or community access',
    
    // Toasts and Messages
    'toast.languageUpdated': 'Language Updated',
    'toast.themeUpdated': 'Theme Updated',
    'toast.switchedTo': 'Switched to',
    'toast.mode': 'mode',
    'toast.cacheDownloaded': 'Cache Downloaded!',
    'toast.cacheDesc': '10 most common crops for your region are now available offline.',
    'toast.offlineModeEnabled': 'Offline Mode Enabled',
    'toast.offlineModeDisabled': 'Offline Mode Disabled',
    'toast.offlineDesc': 'Content will be cached for offline use',
    'toast.onlineDesc': 'Content will not be cached offline',
    'toast.premiumUpgrade': 'Premium Upgrade',
    'toast.stripeIntegration': 'Stripe integration coming soon!',
    'toast.helpSupport': 'Help & Support',
    'toast.contactUs': 'Contact us at support@agroeng.ai or WhatsApp +1234567890',
    'toast.privacyTitle': 'Privacy Policy',
    'toast.privacyDesc': 'Your data is secure and never shared with third parties.',
    'toast.premiumFeatures': 'Get unlimited scans and advanced features!',
  },
  
  french: {
    // Navigation
    'nav.home': 'Accueil',
    'nav.camera': 'Cam√©ra',
    'nav.history': 'Historique',
    'nav.tips': 'Conseils',
    'nav.settings': 'Param√®tres',
    
    // Settings Page
    'settings.title': 'Param√®tres',
    'settings.profile': 'Profil',
    'settings.editProfile': 'Modifier le profil',
    'settings.completeProfile': 'Compl√©tez votre profil',
    'settings.addLocation': 'Ajouter un lieu',
    'settings.setupProfile': 'Configurez votre profil d\'agriculteur',
    'settings.appSettings': 'Param√®tres de l\'application',
    'settings.language': 'Langue',
    'settings.audioLanguage': 'Langue audio',
    'settings.darkMode': 'Mode sombre',
    'settings.darkModeDesc': 'Basculer vers le th√®me sombre',
    'settings.offlineMode': 'Mode hors ligne',
    'settings.offlineModeDesc': 'Mettre en cache le contenu pour une utilisation hors ligne',
    'settings.offlineFeatures': 'Fonctionnalit√©s hors ligne',
    'settings.downloadCache': 'T√©l√©charger le cache hors ligne',
    'settings.downloadCacheDesc': 'T√©l√©charger les cultures communes de votre r√©gion',
    'settings.downloading': 'T√©l√©chargement...',
    'settings.download': 'T√©l√©charger',
    'settings.subscription': 'Abonnement',
    'settings.upgradeToProfile': 'Passer √† Premium',
    'settings.premiumDesc': 'Scans illimit√©s, fonctionnalit√©s avanc√©es',
    'settings.support': 'Support',
    'settings.helpSupport': 'Aide et support',
    'settings.helpSupportDesc': 'FAQ, contacter le support',
    'settings.privacyPolicy': 'Politique de confidentialit√©',
    'settings.privacyPolicyDesc': 'Comment nous prot√©geons vos donn√©es',
    'settings.usage': 'Utilisation ce mois-ci',
    'settings.scansUsed': 'Scans utilis√©s',
    'settings.freeRemaining': 'Gratuits restants',
    'settings.upgradeUnlimited': 'Passer √† Premium pour des scans illimit√©s',
    'settings.farmer': 'agriculteur',
    'settings.managing': 'G√©rant',
    'settings.hectares': 'hectares',
    'settings.version': 'Version 1.0.0',
    'settings.madeWith': 'Fait avec üíö pour les agriculteurs du monde entier',
    'settings.serving': 'Au service des agriculteurs de',
    
    // Add other French translations...
    'pricing.title': 'Choisissez votre plan',
    'pricing.backToSettings': '‚Üê Retour aux param√®tres',
    'pricing.freePlan': 'üÜì Plan gratuit',
    'pricing.premiumPlan': 'üí≥ Plan Premium',
    'pricing.access': 'Acc√®s:',
    'pricing.benefits': 'Avantages:',
    'pricing.currentPlan': 'Plan actuel',
    'pricing.upgradeNow': 'Mettre √† niveau maintenant',
    'pricing.paymentMethods': 'M√©thodes de paiement (adapt√©es √† la r√©gion)',
    
    // Toasts
    'toast.languageUpdated': 'Langue mise √† jour',
    'toast.themeUpdated': 'Th√®me mis √† jour',
    'toast.switchedTo': 'Bascul√© vers',
    'toast.mode': 'mode',
    'toast.cacheDownloaded': 'Cache t√©l√©charg√©!',
    'toast.cacheDesc': '10 cultures les plus communes de votre r√©gion sont maintenant disponibles hors ligne.',
    'toast.offlineModeEnabled': 'Mode hors ligne activ√©',
    'toast.offlineModeDisabled': 'Mode hors ligne d√©sactiv√©',
    'toast.offlineDesc': 'Le contenu sera mis en cache pour une utilisation hors ligne',
    'toast.onlineDesc': 'Le contenu ne sera pas mis en cache hors ligne',
  },
  
  hausa: {
    // Navigation
    'nav.home': 'Gida',
    'nav.camera': 'Kamara',
    'nav.history': 'Tarihi',
    'nav.tips': 'Shawarwari',
    'nav.settings': 'Saiti',
    
    // Settings Page
    'settings.title': 'Saiti',
    'settings.profile': 'Bayani',
    'settings.editProfile': 'Gyara bayani',
    'settings.completeProfile': 'Kammala bayanin ku',
    'settings.addLocation': '∆òara wuri',
    'settings.setupProfile': 'Saita bayanin manomi',
    'settings.appSettings': 'Saitunan app',
    'settings.language': 'Harshe',
    'settings.audioLanguage': 'Harshen sauti',
    'settings.darkMode': 'Yanayin duhu',
    'settings.darkModeDesc': 'Koma zuwa jarin duhu',
    'settings.offlineMode': 'Yanayin kashe intanet',
    'settings.offlineModeDesc': 'Adana abun ciki don amfani ba tare da intanet ba',
    'settings.offlineFeatures': 'Abubuwan aikin ba tare da intanet ba',
    'settings.downloadCache': 'Zazzage cache na ba tare da intanet ba',
    'settings.downloadCacheDesc': 'Zazzage amfanin gona na yankin ku',
    'settings.downloading': 'Ana zazzagewa...',
    'settings.download': 'Zazzage',
    'settings.subscription': 'Biyan ku…ói',
    'settings.upgradeToProfile': 'Ha…ìaka zuwa Premium',
    'settings.premiumDesc': 'Scan marar iyaka, fasali na ci gaba',
    'settings.support': 'Tallafi',
    'settings.helpSupport': 'Taimako da tallafi',
    'settings.helpSupportDesc': 'FAQ, tuntu…ìi tallafi',
    'settings.privacyPolicy': 'Manufar sirri',
    'settings.privacyPolicyDesc': 'Yadda muke kare bayananku',
    'settings.usage': 'Amfani na wannan wata',
    'settings.scansUsed': 'Scan da aka yi amfani',
    'settings.freeRemaining': 'Kyauta da suka rage',
    'settings.upgradeUnlimited': 'Ha…ìaka don Scan marar iyaka',
    'settings.farmer': 'manomi',
    'settings.managing': 'Sarrafa',
    'settings.hectares': 'hektoci',
    'settings.version': 'Sigar 1.0.0',
    'settings.madeWith': 'An yi shi da üíö don manoma a duniya',
    'settings.serving': 'Hidimar manoma a',
    
    // Add other Hausa translations...
    'toast.languageUpdated': 'An sabunta harshe',
    'toast.themeUpdated': 'An sabunta jari',
    'toast.switchedTo': 'An komawa zuwa',
    'toast.mode': 'yanayi',
    'toast.cacheDownloaded': 'An zazzage cache!',
    'toast.offlineModeEnabled': 'An kunna yanayin kashe intanet',
    'toast.offlineModeDisabled': 'An kashe yanayin kashe intanet',
  },
  
  // Add basic translations for other languages
  yoruba: {
    'nav.home': 'Ile',
    'nav.camera': 'Kam·∫πra',
    'nav.history': 'Itan',
    'nav.tips': 'Aw·ªçn im·ªçran',
    'nav.settings': 'Eto',
    'settings.title': 'Eto',
    'settings.language': 'Ede',
    'settings.audioLanguage': 'Ede ohun',
    'toast.languageUpdated': 'Ede ti yipada',
    'toast.themeUpdated': 'Akop·ªç ti yipada',
  },
  
  igbo: {
    'nav.home': '·ª§l·ªç',
    'nav.camera': 'Igwefoto',
    'nav.history': 'Ak·ª•k·ªç ihe mere eme',
    'nav.tips': 'Nd·ª•m·ªçd·ª•',
    'nav.settings': 'Nt·ªçala',
    'settings.title': 'Nt·ªçala',
    'settings.language': 'As·ª•s·ª•',
    'settings.audioLanguage': 'As·ª•s·ª• olu',
    'toast.languageUpdated': 'Emelitela as·ª•s·ª•',
    'toast.themeUpdated': 'Emelitela isiokwu',
  },
  
  swahili: {
    'nav.home': 'Nyumbani',
    'nav.camera': 'Kamera',
    'nav.history': 'Historia',
    'nav.tips': 'Vidokezo',
    'nav.settings': 'Mipangilio',
    'settings.title': 'Mipangilio',
    'settings.language': 'Lugha',
    'settings.audioLanguage': 'Lugha ya sauti',
    'toast.languageUpdated': 'Lugha imesasishwa',
    'toast.themeUpdated': 'Mandhari imesasishwa',
  },
  
  wolof: {
    'nav.home': 'K√´r',
    'nav.camera': 'Kameeray',
    'nav.history': 'Jaar',
    'nav.tips': 'Jaar-jaar',
    'nav.settings': 'Doxalin',
    'settings.title': 'Doxalin',
    'settings.language': 'L√†kk',
    'settings.audioLanguage': 'L√†kk bu baat',
    'toast.languageUpdated': 'L√†kk bi soppi na',
  },
  
  bambara: {
    'nav.home': 'So',
    'nav.camera': 'Kamera',
    'nav.history': 'Tariku',
    'nav.tips': 'Ladilikanw',
    'nav.settings': 'Labencogo',
    'settings.title': 'Labencogo',
    'settings.language': 'Kan',
    'settings.audioLanguage': 'Kan kumakan',
    'toast.languageUpdated': 'Kan ye caman',
  },
  
  fula: {
    'nav.home': 'Suudu',
    'nav.camera': 'Kamera',
    'nav.history': 'Taariikh',
    'nav.tips': 'Faamde',
    'nav.settings': 'Teelte',
    'settings.title': 'Teelte',
    'settings.language': '∆äemngal',
    'settings.audioLanguage': '∆äemngal daande',
    'toast.languageUpdated': '∆äemngal waylu',
  },
  
  twi: {
    'nav.home': 'Fie',
    'nav.camera': 'Mfoni',
    'nav.history': 'Abak…îs…õm',
    'nav.tips': 'Afotuo',
    'nav.settings': 'Nhyehy…õe',
    'settings.title': 'Nhyehy…õe',
    'settings.language': 'Kasa',
    'settings.audioLanguage': 'Kasa a w…îde ka',
    'toast.languageUpdated': 'W…îasesa kasa no',
  },
};

interface LanguageProviderProps {
  children: ReactNode;
}

export const LanguageProvider = ({ children }: LanguageProviderProps) => {
  const [language, setLanguage] = useState<Language>(() => {
    const saved = localStorage.getItem('app-language');
    return (saved as Language) || 'english';
  });

  const handleSetLanguage = (newLanguage: Language) => {
    setLanguage(newLanguage);
    localStorage.setItem('app-language', newLanguage);
  };

  const t = (key: string): string => {
    return translations[language]?.[key] || translations.english[key] || key;
  };

  useEffect(() => {
    localStorage.setItem('app-language', language);
  }, [language]);

  return (
    <LanguageContext.Provider value={{ language, setLanguage: handleSetLanguage, t }}>
      {children}
    </LanguageContext.Provider>
  );
};

export const useLanguage = () => {
  const context = useContext(LanguageContext);
  if (context === undefined) {
    throw new Error('useLanguage must be used within a LanguageProvider');
  }
  return context;
};